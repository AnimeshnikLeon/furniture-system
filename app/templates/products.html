{% extends "base.html" %}
{% block title %}Список продукции{% endblock %}

{% block content %}
<header class="page-header">
    <h2 class="page-title">Продукция</h2>
    <a href="/ui/products/new" class="btn btn-primary">Добавить продукт</a>
</header>

<table class="data-table">
    <thead>
    <tr>
        <th>Тип продукции</th>
        <th>Наименование</th>
        <th>Артикул</th>
        <th>Минимальная стоимость для партнёра</th>
        <th>Основной материал</th>
        <th>Время изготовления, ч</th>
        <th class="column-actions">Действия</th>
    </tr>
    </thead>
    <tbody>
    {% for p in products %}
    <tr>
        <td>{{ p.product_type }}</td>
        <td>{{ p.name }}</td>
        <td>{{ p.article }}</td>
        <td>
            {{ "{:,.2f}".format(p.min_partner_price).replace(",", " ").replace(".", ",") }} ₽
        </td>
        <td>{{ p.material_type }}</td>
        <td class="cell-centered">{{ p.production_time_hours }}</td>
        <td class="table-actions">
            <a href="/ui/products/{{ p.id }}/workshops" class="link-action">Цеха</a>
            <a href="/ui/products/{{ p.id }}/edit" class="link-action">Редактировать</a>
            <form method="post"
                  action="/ui/products/{{ p.id }}/delete"
                  class="inline-form"
                  onsubmit="return confirmDeletion('продукт «{{ p.name }}»');">
                <button type="submit" class="link-action link-danger">
                    Удалить
                </button>
            </form>
        </td>
    </tr>
    {% else %}
    <tr>
        <td colspan="7" class="table-empty">В базе пока нет продукции.</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}